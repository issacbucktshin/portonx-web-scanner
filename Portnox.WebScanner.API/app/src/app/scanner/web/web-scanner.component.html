<div class="web-scanner-page">
    <div class='card'>
        <header>
            <h4 class='title gray-opacity'>Web Scanner</h4>
        </header>
        <div class='card-body'>
            <form [formGroup]="filtersForm" autocomplete="off">
                <div class="filters d-flex row m-0">
                    <div class="filter p-0 mr-4 col" *ngFor="let filter of filters">
                        <mat-form-field>
                            <input [formControlName]="filter.property" [type]='filter.type' matInput
                                [placeholder]="filter.label">
                        </mat-form-field>

                    </div>
                    <div class="save-container ml-auto p-2">
                        <button mat-raised-button color='primary' (click)="scan()" class="round">
                            Scan
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class='card'>
        <header>
            <h4 class='title gray-opacity'>Result</h4>
        </header>
        <div class='card-body'>
            <loading *ngIf='loading'></loading>
            <div *ngIf='!loading' class="shippers-table-container">
                <div class="web-scanner-result">
                    <table style="width: 100%;" mat-table [dataSource]="dataSource">
                        <ng-container *ngFor="let column of tableColumns"
                            [matColumnDef]="column.subNname ? column['name']['subNname'] : column['name']">
                            <th class="bold accent p-0" mat-header-cell mat-sort-header *matHeaderCellDef>
                                {{column.displayName}} </th>
                            <td class="p-0" mat-cell *matCellDef="let element">
                                <span *ngIf="column.type=='phone'">{{element[column.name]}} </span>
                                <span *ngIf="column.type=='text'">{{element[column.name] }} </span>
                                <a class="blue pointer" *ngIf="column.type=='link'"
                                    [routerLink]="['/shippers/shipper', element['id']]">{{element[column.name]}}</a>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="shipperCharacterization">
                            <th class="bold accent" mat-header-cell *matHeaderCellDef> Characterization </th>
                            <td mat-cell *matCellDef="let element">{{element?.shipperCharacterization?.name}}</td>
                        </ng-container>

                        <ng-container matColumnDef="invoices">
                            <th class="bold accent" mat-header-cell *matHeaderCellDef> Invoice Pic </th>
                            <td mat-cell *matCellDef="let element">
                                <button (click)="viewInvoice(element)" mat-icon-button color="accent">
                                    <mat-icon>insert_drive_file</mat-icon>
                                </button>
                            </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: false"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>